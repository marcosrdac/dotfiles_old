# i3 config file (v4)


#--- style ---#
# font definitions
set $font Ubuntu Mono
set $size 11
# color            originally 7,2 #iferror
set_from_resource $fg i3wm.color7 #f0f0f0
set_from_resource $bg i3wm.color0 #f0f0f0
# gaps
hide_edge_borders both
for_window [class="^.*"] border pixel 0
gaps inner 8
gaps outer 4


#--- starting ---#
# setting the background
#   NECESSARY: feh, pywal, wal_steam
#   Look here: https://github.com/dylanaraps/pywal/wiki/Customization
exec --no-startup-id exec ~/.config/i3/scripts/pywal
# Remaping keys
#   note: 9 Escape  66 Caps_Lock  KP_Separator npcomma  KP_Decimal npdot
exec_always --no-startup-id xmodmap -e "clear lock"
exec_always --no-startup-id xmodmap -e "keycode 9 = Caps_Lock NoSymbol Caps_Lock"
exec_always --no-startup-id xmodmap -e "keycode 66 = Escape NoSymbol Escape"
exec_always --no-startup-id xmodmap -e "keycode 91 = KP_Separator KP_Decimal"
# redshift for the sake of your eyes
exec --no-startup-id redshift -l -12.98:-36.52
# parcelite for clipboard's persistency bug
exec --no-startup-id parcelite -n
# setting up touchpad
exec --no-startup-id synclient VertEdgeScroll=0 HorizTwoFingerScroll=1 TapButton3=2
# starting dropbox
exec --no-startup-id dropbox start


# general settings
set $mod Mod1
set $term urxvt
set $browser --no-startup-id qutebrowser


#--- screen ---#
set $incbr --no-startup-id xbacklight -inc 5
set $decbr --no-startup-id xbacklight -dec 5


#--- audio ---#
# alsa/amixer
set $inc --no-startup-id amixer sset Master 2%+
set $biginc --no-startup-id amixer sset Master 5%+
set $dec --no-startup-id amixer sset Master 2%-
set $bigdec --no-startup-id amixer sset Master 5%-
set $mute --no-startup-id amixer sset Master toggle
#amixer sset Headphone toggle; amixer sset Headphone toggle
set $truemute --no-startup-id amixer sset Master mute


#--- music ---#
# cmus
set $music cmus
set $pause --no-startup-id cmus-remote -u
set $next --no-startup-id cmus-remote -n
set $prev --no-startup-id cmus-remote -r
set $lilfor --no-startup-id cmus-remote -k +10
set $bigfor --no-startup-id cmus-remote -k +120
set $lilbak --no-startup-id cmus-remote -k -10
set $bigbak --no-startup-id cmus-remote -k -120
set $beg --no-startup-id cmus-remote -k 00:00:00


#--- window managing ---#
# setting hjkl
set $left  h
set $down  j
set $up    k
set $right l
# killing focused window
bindsym $mod+Shift+q kill
# changing focus hjkl
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$left  focus left
bindsym $mod+$right focus right
# focus floating windows|tiling
bindsym $mod+backslash focus mode_toggle
# moving focused window hjkl
bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+$right move right
# resizing window arrow keys
bindsym $mod+Ctrl+$left  resize shrink width 2 px or 2 ppt
bindsym $mod+Ctrl+$down  resize grow height 2 px or 2 ppt
bindsym $mod+Ctrl+$up    resize shrink height 2 px or 2 ppt
bindsym $mod+Ctrl+$right resize grow width 2 px or 2 ppt
# layout and modes
bindsym $mod+s     split toggle
bindsym $mod+f     fullscreen toggle
bindsym $mod+space floating toggle


#--- workspaces ---#
# setting workspaces
#   for fancy icons...
#     "1:<span font='Font Awesome 5 Free Solid 11'></span>"
#     Symbols: ïƒ´ï‚ ï‚¬ï‚†ï‡¼ðŸ—–ï€¥
set $ws1  " 1 "
set $ws2  " 2 "
set $ws3  " 3 "
set $ws4  " 4 "
set $ws5  " 5 "
set $ws6  " 6 "
set $ws7  " 7 "
set $ws8  " 8 "
set $ws9  " 9 "
set $ws10 " 10 "
workspace $ws5 gaps inner 0
workspace $ws5 gaps outer 0
workspace $ws6 gaps inner 0
workspace $ws6 gaps outer 0
# switching back and forth
bindsym $mod+Tab   workspace back_and_forth
# switching between workspaces
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10
# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10
# show scratchpad
bindsym $mod+minus scratchpad show
# move to scratchpad
bindsym $mod+Shift+minus move scratchpad


#--- windows startup ---#
# use xprop to identify windows
# xev
for_window [title="^Event Tester"] floating enable
# cmus
#for_window [title="^cmus v\d\.\d\.\d"] move workspace $ws10
# gimp [set "single window mode"]
for_window [class="Gimp"] move workspace $ws5
for_window [title="GIMP Startup"] move workspace $ws5
#for_window [window_role="gimp-image-window"] floating disable, move right
#for_window [window_role="gimp-dock"] floating disable, move right, resize shrink width 15 px or 15ppt
#for_window [window_role="gimp-toolbox"] floating disable, move left, resize shrink width 25 px or 25ppt
for_window [window_role="gimp-toolbox-color-dialog"] floating enable
# steam
# https://github.com/ValveSoftware/steam-for-linux/issues/1040
for_window [class="^Steam$" title="^Friends$"] floating enable
for_window [class="^Steam$" title="Steam - News"] floating enable
for_window [class="^Steam$" title=".* - Chat"] floating enable
for_window [class="^Steam$" title="^Settings$"] floating enable
for_window [class="^Steam$" title=".* - event started"] floating enable
for_window [class="^Steam$" title=".* CD key"] floating enable
for_window [class="^Steam$" title="^Steam - Self Updater$"] floating enable
for_window [class="^Steam$" title="^Screenshot Uploader$"] floating enable
for_window [class="^Steam$" title="^Steam Guard - Computer Authorization Required$"] floating enable
for_window [title="^Steam Keyboard$"] floating enable


#--- keybindings ---#

# common softwares
bindsym $mod+Return exec $term
bindsym $mod+v      exec $term -e vim
bindsym $mod+n      exec $term -e ranger
bindsym $mod+m      exec $term -e $music
bindsym $mod+b      exec --no-startup-id qutebrowser
bindsym $mod+c      exec $term -e python3 -q

# system managing
#   NECESSARY:
#     -      $ sudo visudo
#     - add  %sudo ALL = NOPASSWD: /sbin/shutdown, /sbin/poweroff, /sbin/halt, /sbin/reboot, /bin/systemctl suspend
bindsym Ctrl+Escape exec --no-startup-id ~/.config/i3/scripts/system "$font" "$size" "$bg" "$fg"

# dmenu_run
bindsym $mod+o exec dmenu_run -fn "$font"-"$size" -nb "$bg" -nf "$fg" -sb "$fg" -sf "$bg" -p "open"

# i3
# there is an option for reload too
bindsym $mod+Shift+r restart

# printscreen
bindsym --release Print      exec --no-startup-id scrot -e 'mv $f ~/Pictures'
bindsym --release $mod+Print exec --no-startup-id scrot -u -e 'mv $f ~/Pictures'
bindsym --release Shift+Print exec --no-startup-id scrot -s -e 'mv $f ~/Pictures'

# Sreen brightness controls
bindsym XF86MonBrightnessUp   exec $incbr # increase screen brightness
bindsym XF86MonBrightnessDown exec $decbr # decrease screen brightness

# Media player controls
bindsym XF86AudioPlay           exec $pause
bindsym XF86AudioNext           exec $next
bindsym XF86AudioPrev           exec $prev
bindsym XF86AudioMute           exec $mute
bindsym XF86AudioLowerVolume    exec $bigdec
bindsym XF86AudioRaiseVolume    exec $biginc

# stuff to be tested
bindsym XF86Explorer            exec urxvt -e ranger /
bindsym XF86HomePage            exec urxvt -e ranger ~/
bindsym XF86Calculator          exec $term -e python3 -q


#--- setting font, colors and bar ---#
# font
font pango:$font $size

# class                 border  backgr. text indicator child_border
client.focused          $bg     $bg     $fg  $bg       $bg
client.focused_inactive $bg     $bg     $fg  $bg       $bg
client.unfocused        $bg     $bg     $fg  $bg       $bg
client.urgent           $bg     $bg     $fg  $bg       $bg
client.placeholder      $bg     $bg     $fg  $bg       $bg

client.background       $bg


bar {
	status_command i3blocks -c ~/.config/i3/i3blocks.conf
        font pango:$font $size
	separator_symbol " "
	position top
        tray_output primary
	colors {
		background $bg
	    	separator $fg
		#                  border             background         text
		focused_workspace  $bg                $fg                $bg
		inactive_workspace $bg                $bg                $fg
		urgent_workspace   $bg                $fg                $bg
		}
}
