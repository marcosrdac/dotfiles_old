#!/usr/bin/env sh

LOGDIR=$XDG_RUNTIME_DIR/flog
[ -e $LOGDIR ] || mkdir -p $LOGDIR
LOGFILE="$LOGDIR/flog"
touch $LOGFILE


case $1 in
  mv) shift
    src="$1" && dest="$2" && echo -e "do\tmv\t$src\t$dest" >> $LOGFILE ;;
  cp) shift
    src="$1" && dest="$2" && echo -e "do\tcp\t$src\t$dest" >> $LOGFILE ;;
  trash) shift
    src="$1" && trashid="$2" && echo -e "do\ttrash\t$src\t$trashid" >> $LOGFILE ;;
  undo) shift
    case $1 in
      mv) shift
        src="$1" && dest="$2" && echo -e "undo\tmv\t$dest\t$src" >> $LOGFILE ;;
      cp) shift
                                                          v
        src="$1" && trashid="$2" && echo -e "undo\trash\tput\t$src\t$dest" >> $LOGFILE ;;
      trash) shift
        src="$1" && dest="$2" && echo -e "undo\ttrash\t$src\t$dest" >> $LOGFILE ;;
    esac;;
  --clear|-c) echo -n "" >> $LOGFILE ;;
  *) echo "Arguments not understood." ;;
esac
